# Config for sway
#
# Read `man 5 sway` for a complete reference.

# Shortcuts configuration

### Declare variables
set {
    # Primary mod key.
    # Mod4 is Meta key, Mod1 is Alt.
    $mod Mod4

    # Add Vim key support
    $left h
    $down j
    $up k
    $right l

    # Default terminal emulator
    $term footclient

    # Application launcher
    $launcher fuzzel

    # Application menu
    $menu nwg-drawer
}

### Key bindings
#
# Basics:
#
bindsym {
    # Launch the terminal
    $mod+t exec $term

    # Open the power menu
    XF86PowerOff exec $powermenu

    # Kill focused window
	$mod+Backspace kill
	$mod+q kill

    # Start your launcher
    $mod+space exec $launcher

    # Menu
    $mod+Shift+space exec $menu

    # Switch to the last recently used window
    Alt+Tab exec swayr switch-to-urgent-or-lru-window

    # Lock screen
    $mod+f1 exec gtklock

    # Activities
    $mod+Tab exec swayr switch-window

    # Activities and workspaces
    $mod+Shift+Tab exec swayr switch-workspace-or-window

    # Open this file in a floating window
    $mod+Shift+i exec $term -T sway_config -e micro ~/.config/sway/config.d/default

    # Reload the configuration file
    $mod+Shift+c reload
}

#
# Moving around:
#
bindsym {
    # Change window focus
    $mod+Left focus left
    $mod+Down focus down
    $mod+Up focus up
    $mod+Right focus right
    # Vim key support
    $mod+$left focus left
    $mod+$down focus down
    $mod+$up focus up
    $mod+$right focus right

    # Move the focused window
    $mod+Shift+Left move left
    $mod+Shift+Down move down
    $mod+Shift+Up move up
    $mod+Shift+Right move right
    # Vim key support
    $mod+Shift+$left move left
    $mod+Shift+$down move down
    $mod+Shift+$up move up
    $mod+Shift+$right move right
}

#
# Workspaces:
#
bindsym {
    # Switch to workspace
    $mod+1 workspace number 1
    $mod+2 workspace number 2
    $mod+3 workspace number 3
    $mod+4 workspace number 4
    $mod+5 workspace number 5
    $mod+6 workspace number 6
    $mod+7 workspace number 7
    $mod+8 workspace number 8
    $mod+9 workspace number 9
    $mod+0 workspace number 10
    # Move focused container to workspace
    $mod+Shift+1 move container to workspace number 1
    $mod+Shift+2 move container to workspace number 2
    $mod+Shift+3 move container to workspace number 3
    $mod+Shift+4 move container to workspace number 4
    $mod+Shift+5 move container to workspace number 5
    $mod+Shift+6 move container to workspace number 6
    $mod+Shift+7 move container to workspace number 7
    $mod+Shift+8 move container to workspace number 8
    $mod+Shift+9 move container to workspace number 9
    $mod+Shift+0 move container to workspace number 10
}

#
# Layout stuff:
#
bindsym {
    # Set how the current window will be split
    # Split the window vertically
    $mod+v splitv
    # Split the window horizontally
    $mod+Shift+v splith

    # Switch the current container between different layout styles
#    $mod+Shift+s layout stacking
#    $mod+Shift+w layout tabbed
#    $mod+Shift+e layout toggle split

    # Make the current focus fullscreen
    $mod+Shift+f fullscreen

    # Toggle between tiling and floating mode
#    $mod+space floating toggle

    # Swap focus between the tiling area and the floating area
#    $mod+Shift+space focus mode_toggle

    # Move focus to the parent container
    $mod+a focus parent
}

#
# Scratchpad:
#
# Sway has a "scratchpad", which is a bag of holding for windows.
# You can send windows there and get them back later.

bindsym {
    # Move the currently focused window to the scratchpad
    $mod+Shift+minus move scratchpad

    # Show the next scratchpad window or hide the focused scratchpad window.
    # If there are multiple scratchpad windows, this command cycles through them.
    $mod+minus scratchpad show
}

#
# Resizing containers:
#
bindsym {
    # Resize with arrow keys
    $mod+ctrl+Right resize shrink width 10 px
    $mod+ctrl+Up resize grow height 10 px
    $mod+ctrl+Down resize shrink height 10 px
    $mod+ctrl+Left resize grow width 10 px
    # Resize with Vim keys
    $mod+ctrl+l resize shrink width 10 px
    $mod+ctrl+k resize grow height 10 px
    $mod+ctrl+j resize shrink height 10 px
    $mod+ctrl+h resize grow width 10 px
}

# Resize floating windows with mouse scroll:
bindsym --whole-window --border {
    # Resize vertically
    $mod+button4 resize shrink height 5 px or 5 ppt
    $mod+button5 resize grow height 5 px or 5 ppt
    # Resize horizontally
    $mod+Shift+button4 resize shrink width 5 px or 5 ppt
    $mod+Shift+button5 resize grow width 5 px or 5 ppt
}

# Move windows by holding down $mod and left mouse button.
# Resize them with right mouse button + $mod.
# Change "normal" to "inverse" to switch left and right
floating_modifier $mod normal

#
# Media Keys
#
bindsym {
    # Volume
    XF86AudioRaiseVolume exec pamixer -ui 2
    XF86AudioLowerVolume exec pamixer -ud 2
    XF86AudioMute exec pamixer --toggle-mute

    # Player
    XF86AudioPlay exec playerctl play-pause
    XF86AudioNext exec playerctl next
    XF86AudioPrev exec playerctl previous

    # Backlight
    XF86MonBrightnessUp exec brightnessctl -c backlight set +5%
    XF86MonBrightnessDown exec brightnessctl -c backlight set 5%-
#   Keyboard
    XF86KbdBrightnessUp exec brightnessctl -d smc::kbd_backlight set +10%
    XF86KbdBrightnessDown exec brightnessctl -d smc::kbd_backlight set 10%-


}

#
# App shortcuts
#
bindsym {
    # Launch the file explorer
    $mod+e exec thunar
    $mod+f exec thunar
    # Launch the browser
    $mod+w exec firefox
    # Launch the text editor
    $mod+m exec mousepad
    # Launch the calculator
    $mod+c exec galculator
    # Launch the clipboard manager
    $mod+Ctrl+v exec cliphist list | fuzzel -d -w 90 -l 30 -p "Select an entry to copy it to your clipboard buffer:"| cliphist decode | wl-copy
    # Delete an entry from the clipboard manager
    $mod+Ctrl+x exec cliphist list | fuzzel -d -w 90 -l 30 -t cc9393ff -S cc9393ff -p "Select an entry to delete it from cliphist:"| cliphist delete
    # Note: you can clear all cliphist entries by running `cliphist wipe`
}

#
# Screenshots
#
bindsym {
    # Snip a selection and pipe to swappy
    print exec grim -g "$(slurp)" - | swappy -f -
    # Screenshot a window and pipe to swappy
    Ctrl+Print exec ~/.config/sway/scripts/screenshot_window.sh
    # Screenshot the current display and pipe to swappy
    Shift+Print exec ~/.config/sway/scripts/screenshot_display.sh
}


# Output configuration
	# Example configuration:
	# output HDMI-A-1 resolution 1920x1080 position 1920,0
	# You can get the names of your outputs by running: swaymsg -t get_outputs

	# output LVDS-2 resolution 1440x900 position 0,0
	# output LVDS-1 disable

# Input configuration
	# Read `man 5 sway-input` for more information about this section.

	# Touchpad configuration
	input type:touchpad {
	    dwt enabled
	    tap enabled
	    #natural_scroll enabled
	}

	bindgesture {
	    swipe:right workspace prev
	    swipe:left exec ~/.config/sway/scripts/advance_workspace.sh
	    swipe:up move scratchpad
	    swipe:down scratchpad show
	}

	# Enable numlock by default
	input type:keyboard xkb_numlock enabled

	# Set keyboard layout and variant based on current system settings
	exec_always {
	    'swaymsg input type:keyboard xkb_layout "$(localectl status | grep "X11 Layout" | sed -e "s/^.*X11 Layout://")"'
	    'swaymsg input type:keyboard xkb_variant "$(localectl status | grep "X11 Variant" | sed -e "s/^.*X11 Variant://")"'
	}

# SwayFX config options

	### Appearance
	# window corner radius in px
	corner_radius 4

	# Window background blur
	blur enable
	blur_xray off
	blur_passes 4
	blur_radius 8

	shadows enable
	shadows_on_csd off
	shadow_blur_radius 8
	shadow_color #0000007F

	# Waybar blur
	layer_effects "waybar" blur enable; shadows enable; corner_radius 10
	
	# inactive window fade amount. 0.0 = no dimming, 1.0 = fully dimmed
	default_dim_inactive 0.2
	dim_inactive_colors.unfocused #000000FF
	dim_inactive_colors.urgent #900000FF

	# Move minimized windows into Scratchpad (enable|disable)
	scratchpad_minimize enable

# Theme settings

	# Apply gtk theming
	exec_always ~/.config/sway/scripts/import-gsettings
	
	# Set inner/outer gaps
	gaps inner 2
	gaps outer 2
	
	# Hide titlebar on windows: 
	default_border pixel 2
	
	# Default Font
	font pango:JetBrainsMono 10
	
	# Thin borders:
	smart_borders on
	
	# Set wallpaper:
	exec ~/.azotebg
	
	# Title format for windows
	for_window [shell="xdg_shell"] title_format "%title (%app_id)"
	for_window [shell="x_wayland"] title_format "%class - %title"
	
	## Window decoration
	# class                 border  backgr. text    indicator child_border
	client.focused          #81a1c1 #434c5e #81a1c1 #81a1c1   #81a1c1
	client.focused_inactive #88c0d0 #2e3440 #d8dee9 #4c566a   #4c566a
	client.unfocused        #88c0d0 #2e3440 #d8dee9 #4c566a   #4c566a
	client.urgent           #ebcb8b #ebcb8b #2e3440 #8fbcbb   #ebcb8b
	
	#
	# Status Bar:
	#
	# Read `man 5 sway-bar` for more information about this section.
	bar {
	    swaybar_command waybar
	}


# Autostart applications

	# Auth with polkit-gnome:
	exec /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

	# Import environment variables for user systemd service manager
	exec systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK

	# Update dbus environments with display variables
	exec hash dbus-update-activation-environment 2>/dev/null && \
		dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK

	# Idle configuration
	exec swayidle idlehint 1
	exec_always swayidle -w before-sleep "gtklock -d"

	# Desktop notifications
	exec mako
	
	# Start foot server
	exec_always --no-startup-id foot --server

	# Autotiling
	exec autotiling

	# Launch all Sway applications in autostart directories
	exec dex -a -e sway

	# cliphist
	exec wl-paste --type text --watch cliphist store
	exec wl-paste --type image --watch cliphist store

	# Outputs
	exec kanshi

	# nwg-drawer
	exec_always nwg-drawer -r -c 7 -is 90 -mb 10 -ml 50 -mr 50 -mt 10

	# swayrd
	exec_always swayrd

	# Sway Fader
	exec python3 ~/.config/sway/scripts/swayfader.py     

# Application defaults

	# set floating (nontiling)
	for_window [class="Yad" instance="yad"] floating enable
	for_window [app_id="yad"] floating enable
	for_window [app_id="blueman-manager"] floating enable,  resize set width 40 ppt height 30 ppt
	for_window [app_id="calamares"] floating enable
	for_window [app_id="setup-assistant"] floating enable, resize set width 70 ppt height 70 ppt
	for_window [title="launch-terminal"] floating enable, resize set width 60 ppt height 80 ppt
	for_window [app_id="galculator"] floating enable, move position cursor
	for_window [window_role="pop-up"] floating enable
	for_window [window_role="bubble"] floating enable
	for_window [window_role="task_dialog"] floating enable
	for_window [window_role="Preferences"] floating enable
	for_window [window_type="dialog"] floating enable
	for_window [window_type="menu"] floating enable
	for_window [window_role="About"] floating enable
	for_window [title="File Operation Progress"] floating enable, border pixel 1, sticky enable, resize set width 40 ppt height 30 ppt
	for_window [app_id="floating_shell_portrait"] floating enable, border pixel 1, sticky enable, resize set width 30 ppt height 40 ppt
	for_window [title="Picture in picture"] floating enable, sticky enable
	for_window [app_id="xsensors"] floating enable
	for_window [title="Save File"] floating enable
	for_window [title="waybar_btm"] floating enable, resize set width 50 ppt height 70 ppt
	for_window [title="waybar_nmtui"] floating enable
	for_window [title="waybar_pacseek"] floating enable, resize set width 80 ppt height 80 ppt
	for_window [title="waybar_dua"] floating enable, resize set width 60 ppt height 80 ppt
	for_window [title="waybar_battop"] floating enable, resize set width 60 ppt height 60 ppt
	for_window [title="waybar_bluetui"] floating enable, resize set width 50 ppt height 70 ppt
	for_window [title="waybar_s-tui"] floating enable, resize set width 50 ppt height 70 ppt
	for_window [title="waybar_calcurse"] floating enable, resize set width 60 ppt height 60 ppt
	for_window [title="waybar_calcurse-caldav"] floating enable, move position cursor
	for_window [title="sway_config"] floating enable, resize set width 80 ppt height 80 ppt

	# Inhibit idle
	for_window [app_id="librewolf"] inhibit_idle fullscreen
	for_window [app_id="Chromium"] inhibit_idle fullscreen


